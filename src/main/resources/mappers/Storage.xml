<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.digitalBook.Mapper.StorageMapper">
	<!-- 이용과 조회 -->
	<select id="SelectDepartment" resultType="Department">
		SELECT * FROM department
		WHERE depart_depth = 2
	</select>
	
	<!-- 장소 갯수 조회 -->
	<select id="SelectStorageCount" resultType="int">
		SELECT COUNT(*) FROM storage
	</select>
	
	<!-- 장소 검색 -->
	<select id="SearchStorage" resultType="Storage">
		SELECT * FROM storage s
		LEFT JOIN department d ON s.depart_id = d.depart_id
		LIMIT #{offset}, #{limit}
	</select>
	
	<!-- 최신 장소 코드 조회 -->
	<select id="SelectLastStorage" resultType="Storage">
		SELECT * FROM storage
		ORDER BY storage_id DESC
		LIMIT 1
	</select>
	
	<!-- 장소 등록 -->
	<insert id="InsertStorage" parameterType="Storage">
		INSERT INTO storage
		(storage_code, storage_name, storage_type, storage_division, storage_size, depart_id, storage_location, create_date, modify_date)
		VALUES
		(#{storage_code}, #{storage_name}, #{storage_type}, #{storage_division}, #{storage_size}, #{depart_id}, #{storage_location}, NOW(), NOW())
	</insert>
</mapper>