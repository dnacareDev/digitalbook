<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<style>
	.content-header{margin-top:30px;}
	.end-button
	{
		width:85px;
		height:40px;
		background-color:#768BF5;
		border:0px;
		margin-top:-15px;
	}
	.end{margin-left:10px;}
	
	
	#qrModal .col-6:first-child .row {justify-content: right; margin-right: 15px; padding: 5px 30px 0 0}
	#qrModal .col-6 .row > span {font-size:16px !important; color: #111 !important; margin: 8px 0}
	
	#qrcode img{
   	 margin: 0 auto;
   }
   #qrModal span{
   	display: inline-block;
   	width: 100%;
   	text-align:left;
   	margin: 10px 10px;
   	font-size:16px !important;
   	color: #111 !important;
   }
	
	/*인쇄 설정 */
	@media print {
	 .noprint { display : none !important;}
	 @page {
	  size : portrait; /* 세로 설정 */
	  margin: 10px 10px 10px 10px;
	 }
	}
	
	
	.select-hide{
		display: none;
	}
	.select-show{
		display: block;
	    position: absolute;
	    z-index :10;
	    top: 30px;
	    width: 97.5%;
	    background-color: white;
	    border:1px solid;
	    border-radius: 5px;
	    cursor: pointer;
	    overflow-y: auto;
	    height: 125px;
	}

	.select .select-show li{
	    padding:0 0 0 5px;
	    line-height: 30px;
	}
	.row.mt-1{
		align-items: center;
	}
	input[type="checkbox"], span.color-dark{
		vertical-align: middle;
		margin-right: 5px;
	}
	.row .aling-items-center:first-child{
		justify-content: start;
	}
	.row .aling-items-center{
		justify-content: start;
	}
	.row.mt-1 .form-control.b-light.genetic_id.input1{
		float: left;
	    width: 80%;
	    vertical-align: middle;
	    border-radius: 5px 0 0 5px !important;
	    border-right: 0;
	}
	.label1{
		float: left;
	    margin: 0 !important;
	    border-radius: 0 5px 5px 0;
	    height: 34.12px;
	    border: 1px solid #e3e6ef;
	    border-left: 0;
	    width: 20%;
	    padding: 0;
	}
	.content_cover{
    	margin-left: 5%;
	}
	.titles{
		float:left;
	}
	.title_inner{
		float:right;
		flex: 0 0 90%;
    	max-width: 85%;
	}
	.title_inner1 {
		float:right;
		flex: 0 0 50%;
    	max-width: 50%;
	}
	[id *="_popup"]{
		width:100vw; height:90vh; position:fixed; left:0px; top:0px; display:none; justify-content: center; align-items:center; z-index: 999999;
	}
	[id *="_popup"] > .card.card-default.card-md.mb-4{
		border:1px solid #eee;width:400px;max-width: 400px
	}
	.row{
		flex-wrap: nowrap !important;
	}
	.card.card-bordered{
	    border-radius: 0 !important;
	    border: none !important;
	    border-bottom: 1px solid #f1f2f6 !important;
	    box-shadow: 0 !important;
	}
</style>
<!-- 공통 헤더 -->
<th:block th:include="/../fragments/header.html"></th:block>
</head>
<body class="layout-light top-menu overlayScroll">
	<div class="mobile-search"></div>
	<div class="mobile-author-actions"></div>
	<!-- 공통 topbar -->
	<th:block th:include="/../fragments/topbar.html"></th:block>
	<main class="main-content" style="background-color: #F9FBFD;">
		<div class="contents" style="background-color: #F9FBFD;">
		    <div class="container-fluid" style="padding: 0 50px;">
		    	<div class="row">
			        <div class="col-lg-12" style="padding: 0 17px;">
			        	<div class="breadcrumb-main" style="float: left; padding:0;">
			        		<h4 class="text-capitalize breadcrumb-title">종자(시료)</h4>
			        		<span class="ml-20 mt-1">기초정보 - 종자(시료)</span>
			        	</div>
			        </div>
		        </div>
		    	<div class="row">
			        <div class="col-lg-12">
			        	<div class="card">
			        		<div class="card-body">
			        			<div class="row">
			        				<div class="col-sm-2 checkbox-theme-default custom-checkbox" style="margin-bottom: 20px;">
			        					<input type="checkbox" id="not_report" class="checkbox">
			        					<label for="not_report">
			        						<span class="checkbox-text color-dark">과제 비연계</span>
			        					</label>
			        				</div>
			        			</div>
		        				<div class="row">
		        					<div class="col-sm-2 d-flex aling-items-center">
		                                   <label for="report_year" class="col-form-label color-dark align-center">과제명</label>
	                                </div>
	                                <div class="col-sm-8"  style="-webkit-box-flex: 0;-ms-flex: 0 0 75%;flex: 0 0 70% !important;max-width: 70% !important;">
	                                	<input type="text" class="form-control b-light seed_code" id="report_code" th:data-report-code="${seeds.get(0).report_code}" th:value="${seeds.get(0).report_title}" readonly="readonly">
	                                </div>
		                         </div>
		                         <div class="row mt-3">
		        					<div class="col-sm-2 d-flex aling-items-center">
		                            	<label for="seed_report" class="color-dark align-center">과제설명</label>
		                            </div>
		                            <div class="col-sm-8" style="-webkit-box-flex: 0;-ms-flex: 0 0 75%;flex: 0 0 70% !important;max-width: 70% !important;">
		                                <textarea class="form-control" id="seed_report" rows="5" th:text="${seeds[0].seed_report}"></textarea>
		                            </div>
		                    	</div>
			        		</div>
			        	</div>
			        	<div class="card mt-4">
			        		<div class="card-body">
			        			<div class="columnGrid-wrapper">
				        			<div class="row">
			        					<div class="col-12" id="seed_form">
			        						<div class="card card-bordered form-standard">
				        						<div class="card-body ml-2 mt-3">
				        							<div class="row">
				        								<div class="col-11 col-md-11 col-lg-11">
					        								<div class="col-12 ml-1">
														        <div class="row">
														        	<div style="font-size: 16px !important; color: initial; padding-bottom:10px; font-weight:700;">종자 및 시료관리</div>
														        </div>
													        </div>
													        <div class="col-12">
														        <div class="row mt-1">
														        	<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label for="seed_code" class="title_asd">샘플 ID</label>
						        									</div>
						        									<div class="col-md-3 mb-25" style="flex:0 0 27%;padding-right:0;max-width:27%">
						        										<input type="text" class="form-control b-light seed_code" id="seed_code" readonly="readonly" style="width:100%">
						        									</div>
						        									<div class="col-md-1 mb-25" style="float:right; padding: 0; padding-left: 10px;">
						        										<button type="button" class="btn btn-sm btn-info qr-btn" style="float:left; padding: 0 5px;">QR Code</button>
						        									</div>
														        </div>
													        </div>
						        							<div class="col-12">
						        								<div class="row mt-1">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label class="title_asd"><span class="red">*</span>품종/유전자원정보</label>
						        									</div>
						        									<div class="col-md-4 mb-25">
						        										<input type="text" class="form-control b-light genetic_id input1" style="float: left;width: 80%;vertical-align: middle;border-radius: 5px 0 0 5px !important;border-right: 0;" readonly="readonly">
						        										<label class="btn btn-light genetic_show label1" style="float: left;margin: 0 !important;border-radius: 0 5px 5px 0;height: 34.12px;border: 1px solid #e3e6ef;border-left: 0;width: 20%; padding:0;">조회</label>
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
										                                    <label for="seed_manager" class="title_asd"><span class="red">*</span>담당자</label>
										                                </div>
										                                <div class="col-md-10 mb-25 title_inner">
										                                	<div class="select" style="height: auto; width:100%">
											                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control seed_manager" id="seed_manager" placeholder="담당자 선택" autocomplete="off">
											                            		<ul class="select-hide">
											                            			<th:block th:each="user : ${user}">
											                            				<li class="seed_manager_list" onclick="selectOpt(this);"><span th:data-value="${user.user_id}" th:text="${user.user_name_k}"></span></li>
											                            			</th:block>
											                            		</ul>
											                            	</div>
							        										<!-- <select class="form-control b-light seed_manager" id="seed_manager">
												                                <option disabled="disabled" selected="selected" hidden="hidden">담당자 선택</option>
												                                <th:block th:each="user : ${user}">
												                                	<option th:value="${user.user_id}" th:text="${user.user_name_k}"></option>
												                                </th:block>
												                            </select> -->
							        									</div>
						        									</div>
						        								</div>
						        								<div class="row">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label for="seed_area" class="title_asd"><span class="red">*</span>생산지역</label>
						        									</div>
						        									<div class="col-md-4 mb-25">
						        										<input type="text" class="form-control b-light seed_area" id="seed_area">
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
										                                    <label for="seed_year" class="title_asd">생산연도</label>
										                                </div>
										                                <div class="col-md-10 mb-25 title_inner">
							        										<input type="number" class="form-control b-light seed_year" id="seed_year" >
							        									</div>
						        									</div>
						        								</div>
						        								<div class="row">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label for="seed_method" class="title_asd">생산방법</label>
						        									</div>
						        									<div class="col-md-4 mb-25">
						        										<div class="select" style="height: auto;">
										                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control seed_method" id="seed_method" placeholder="생산방법 선택" autocomplete="off">
										                            		<ul class="select-hide">
										                            			<li class="seed_method_list" onclick="selectOpt(this);"><span data-value="시험연구">시험연구</span></li>
										                            			<li class="seed_method_list" onclick="selectOpt(this);"><span data-value="증식">증식</span></li>
										                            			<li class="seed_method_list" onclick="selectOpt(this);"><span data-value="구매">구매</span></li>
										                            			<li class="seed_method_list" onclick="selectOpt(this);"><span data-value="외부농가">외부농가</span></li>
										                            		</ul>
										                            	</div>
						        										<!-- <select class="form-control b-light seed_method" name="seed_method">
											                                <option value="">생산 방법 선택</option>
											                                <option value="시험연구">시험연구</option>
											                                <option value="증식">증식</option>
											                                <option value="구매">구매</option>
											                                <option value="외부농가">외부농가</option>
											                            </select> -->
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
										                                    <label for="seed_amount" class="title_asd"><span class="red">*</span>수량(개수)</label>
										                                </div>
										                                <div class="col-md-5 mb-25 title_inner1">
							        										<input type="number" class="form-control b-light seed_amount" id="seed_amount">
							        									</div>
						        									
						        									<div class="col-md-5 mb-25 title_inner1">
						        										<div class="select" style="height: auto;">
										                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control eaches_id" id="eaches_id" placeholder="단위 선택" autocomplete="off">
										                            		<ul class="select-hide" style="width: 89%;">
										                            			<th:block th:each="eaches : ${eaches}">
										                            				<li class="eaches_id_list" onclick="selectOpt(this);"><span th:data-value="${eaches.eaches_id}" th:text="${eaches.eaches_name}"></span></li>
										                            			</th:block>
										                            		</ul>
										                            	</div>
						        										<!-- <select class="form-control b-light eaches_id" name="each" id="eaches_id">
											                                <option disabled="disabled" selected="selected" hidden="hidden">단위 선택</option>
											                                <th:block th:each="eaches : ${eaches}">
											                                	<option th:value="${eaches.eaches_id}" th:text="${eaches.eaches_name}"></option>
											                                </th:block>
											                            </select> -->
						        									</div>
						        									</div>
						        								</div>
						        								<div class="row">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label for="ware_id" class="title_asd"><span class="red">*</span>저장장소</label>
						        									</div>
						        									<div class="col-md-4 mb-25">
						        										<div class="select" style="height: auto;">
										                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control ware_id" id="ware_id" placeholder="저장 장소 선택" autocomplete="off">
										                            		<ul class="select-hide">
										                            			<th:block th:each="ware : ${warehouse}">
										                            				<li class="eaches_id_list" onclick="selectOpt(this);"><span th:data-value="${ware.ware_id}" th:data-condition="${ware.ware_condition}" th:text="${ware.warehouse}"></span></li>
										                            			</th:block>
										                            		</ul>
										                            	</div>
						        										<!-- <select class="form-control b-light ware_id" name="ware_id" id="ware_id">
											                                <option disabled="disabled" selected="selected" hidden="hidden">저장 장소 선택</option>
											                                <th:block th:each="ware : ${warehouse}">
											                                	<option th:value="${ware.ware_id}" th:data-condition="${ware.ware_condition}" th:text="${ware.warehouse}"></option>
											                                </th:block>
											                            </select> -->
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
										                                    <label for="ware_condition" class="title_asd">저장조건</label>
										                                </div>
										                                <div class="col-md-10 mb-25 title_inner">
							        										<input type="text" class="form-control b-light ware_condition" id="ware_condition" readonly="readonly">
							        									</div>
						        									</div>
						        								</div>
						        								<div class="row">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
						        										<label for="seed_comment" class="color-dark fw-500 align-center">Comment</label>
						        									</div>
						        									<div class="col-md-9 mb-25" style="-webkit-box-flex: 0;-ms-flex: 0 0 75%;flex: 0 0 100% !important;max-width: 79% !important;">
						        										<textarea class="form-control seed_comment" id="seed_comment" rows="5"></textarea>
						        									</div>
						        								</div>
						        							</div>
						        							<div class="col-12 ml-1">
														        <div class="row">
														        	<div style="font-size: 16px !important; color: initial; padding: 20px 0 10px 0; font-weight:700;">기타정보</div>
														        </div>
													        </div>
													        <div class="col-12">
						        								<div class="row mt-1">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
									                                    <label for="seed_sender" class="color-dark fw-500 align-center">발송인 정보</label>
									                                </div>
									                                <div class="col-md-4 mb-25">
						        										<input type="text" class="form-control b-light seed_sender" id="seed_sender">
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
							        										<label for="seed_sender title_inner" class="title_asd">수취인 정보</label>
							        									</div>
							        									<div class="col-md-10 mb-25 title_inner">
							        										<div class="select" style="height: auto; width:100%;">
											                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control seed_receiver" id="seed_receiver" placeholder="수취인 선택" autocomplete="off">
											                            		<ul class="select-hide">
											                            			<th:block th:each="user : ${user}">
											                            				<li class="seed_manager_list" onclick="selectOpt(this);"><span th:data-value="${user.user_id}" th:text="${user.user_name_k}"></span></li>
											                            			</th:block>
											                            		</ul>
											                            	</div>
							        										<!-- <select class="form-control b-light seed_receiver" name="seed_receiver" id="seed_receiver">
												                                <option th:value=0>수취인 선택</option>
												                                <th:block th:each="user : ${user}">
												                                	<option th:value="${user.user_id}" th:text="${user.user_name_k}"></option>
												                                </th:block>
												                            </select> -->
							        									</div>
						        									</div>
						        								</div>
						        								<div class="row">
						        									<div class="col-md-2 mb-25 d-flex aling-items-center">
									                                    <label class="title_asd">발송일자</label>
									                                </div>
									                                <div class="col-md-4 mb-25">
						        										<input type="text" class="form-control b-light send_date send-datepicker0">
						        									</div>
						        									<div class="col-md-5 content_cover">
							        									<div class="titles">
							        										<label class="title_asd">수취일자</label>
							        									</div>
							        									<div class="col-md-10 mb-25 title_inner">
							        										<input type="text" class="form-control b-light receive_date receive-datepicker0">
							        									</div>
							        								</div>
						        								</div>
						        								<div class="row">
											        				<div class="col-sm-2 mb-4">
											        					<input type="checkbox" class="seed_share" th:value="0">
											        					<label>
											        						<span class="color-dark" th:text="${#authentication.principal.d3_department_name} + | 공유|"></span>
											        					</label>
											        				</div>
											        			</div>
						        							</div>
					        							</div>
					        							<div class="col-1 col-md-1 col-lg-1 del_btn_div"></div>
				        							</div>
				        						</div>
				        					</div>
			        					</div>
		                        	</div>
		                    	</div>
			        		</div>
			        		<div class="d-flex justify-content-end mr-20 mb-20">
			                	<a class="btn btn-default" id="addseedFormBtn" style="background-color: #64DB99; color: white;">+추가</a>
			                </div>
			        	</div>
			        </div>
			    </div>
		        <div class="row">
					<div class="col-4">
						<div class="action-btn d-flex justify-content-frist mt-30">
							<th:block th:if="${#authentication.principal.user_type == 0}">
								<th:block th:if="${seeds.get(0).seed_status == 0 or seeds.get(0).seed_status == 1}">
									<button type="button" class="btn btn-default btn-info end-button end" onclick="UpdateStatusBtn();">승인</button>
								</th:block>
							</th:block>
						</div>
					</div>
					<div class="col-4">
						<div class="d-flex justify-content-center mt-30"></div>
					</div>
					<div class="col-4">
						<div class="action-btn d-flex justify-content-end mt-30">
							<a href="/data/seed" class="btn btn-primary end-button end" style="background-color:#E2E3E5;">목록</a>
							<button type="button" class="btn btn-default btn-danger end-button end" onclick="DeleteBtn();">삭제</button>
		                	<button type="button" class="btn btn-default btn-primary end-button end" onclick="UpdateBtn();">수정</button>
						</div>
					</div>
				</div>
				<div class="row mt-4" style="margin-top: 50px !important">
					<div class="col-lg-12">
						<div class="card card-default">
							<div class="row ml-3 mt-3">
								<span class="color-dark align-center" style="font-size: 20px;">변경 이력</span>
							</div>
							<div class="card-body" style="height: 325px; overflow-y: auto;">
								<div class="row">
									<div class="col-lg-12">
										<ul>
											<th:block th:each="r : ${record}">
												<li class="mt-2">
													<span class="avatar avatar-success avatar-md avatar-circle" style="float: left;">
	                                                    <span class="avatar-icon" data-feather="check"></span>
	                                                </span>
													<div>
														<span class="font-weight-bold mb-0">시료 </span>
														<span class="font-weight-bold mb-0" th:text="${r.record_type_code}"></span>
														<th:block th:switch="${r.record_status}">
															<span th:case="0" class="font-weight-bold mb-0">승인요청</span>
															<span th:case="1" class="font-weight-bold mb-0">수정요청</span>
															<span th:case="2" class="font-weight-bold mb-0">승인</span>
															<span th:case="3" class="font-weight-bold mb-0">추가요청</span>
														</th:block>
													</div>
													<small th:text="${r.record_date}"></small>
												</li>
											</th:block>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		        <div class="atbd-notice" id="success_popup">
		        	<div class="card card-default card-md mb-4">
		        		<div class="card-body">
		        			<div class="atbd-notice__content">
		        				<div class="atbd-notice__top text-center">
		        					<div class="atbd-notice__icon bg-success">
		        						<i class="fas fa-check color-white"></i>
		        					</div>
		        					<div class="atbd-notice__text">
		        						<h4 id="success_text"></h4>
		        					</div>
		        					<div style="display: flex; justify-content: center; margin: 10% auto;">
		        						<a class="btn btn-default btn-success" href="/data/seed" style="color: #FFFFFF;">확인</a>
		        					</div>
		        				</div>
		        			</div>
		        		</div>
		        	</div>
		        </div>
		        <div class="atbd-notice" id="updateStatus_popup">
		        	<div class="card card-default card-md mb-4">
		        		<div class="card-body">
		        			<div class="atbd-notice__content">
		        				<div class="atbd-notice__top text-center">
		        					<div class="atbd-notice__icon bg-info">
		        						<i class="fas fa-exclamation color-white"></i>
		        					</div>
		        					<div class="atbd-notice__text">
		        						<h4>승인 하시겠습니까?</h4>
		        					</div>
		        					<div style="display: flex; justify-content: center; margin: 10% auto;">
		        						<button class="btn btn-default btn-primary mr-10" onclick="UpdateStatus();" style="color: #FFFFFF;">승인</button>
		        						<button class="btn btn-default btn-danger" onclick="CancelBtn();" style="color: #FFFFFF;">취소</button>
		        					</div>
		        				</div>
		        			</div>
		        		</div>
		        	</div>
		        </div>
		        <div class="atbd-notice" id="update_popup">
		        	<div class="card card-default card-md mb-4">
		        		<div class="card-body">
		        			<div class="atbd-notice__content">
		        				<div class="atbd-notice__top text-center">
		        					<div class="atbd-notice__icon bg-info">
		        						<i class="fas fa-exclamation color-white"></i>
		        					</div>
		        					<div class="atbd-notice__text">
		        						<h4>수정하시겠습니까?</h4>
		        					</div>
		        					<div style="display: flex; justify-content: center; margin: 10% auto;">
		        						<button class="btn btn-default btn-primary mr-10" onclick="updateConfirm();" style="color: #FFFFFF;">수정</button>
		        						<button class="btn btn-default btn-danger" onclick="CancelBtn();" style="color: #FFFFFF;">취소</button>
		        					</div>
		        				</div>
		        			</div>
		        		</div>
		        	</div>
		        </div>
		        <div class="atbd-notice" id="delete_popup">
		        	<div class="card card-default card-md mb-4">
		        		<div class="card-body">
		        			<div class="atbd-notice__content">
		        				<div class="atbd-notice__top text-center">
		        					<div class="atbd-notice__icon bg-danger">
		        						<i class="fas fa-exclamation-triangle color-white"></i>
		        					</div>
		        					<div class="atbd-notice__text">
		        						<h4>삭제하시겠습니까?</h4>
		        					</div>
		        					<div style="display: flex; justify-content: center; margin: 10% auto;">
		        						<button class="btn btn-default btn-primary mr-10" onclick="deleteConfirm();" style="color: #FFFFFF;">삭제</button>
		        						<button class="btn btn-default btn-danger" onclick="CancelBtn();" style="color: #FFFFFF;">취소</button>
		        					</div>
		        				</div>
		        			</div>
		        		</div>
		        	</div>
		        </div>
		    </div>
			
			<div class="modal-basic modal fade show" id="qrModal" tabindex="-1" role="dialog" aria-hidden="true">
			    <div class="modal-dialog modal-md" role="document">
			        <div class="modal-content modal-bg-white">
			        	<div class="modal-header">
			        		<h6 class="modal-title">Print QR Code</h6>
		                    	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		                        	<span data-feather="x"></span>
		                        </button>
			        	</div>
			            <div class="modal-body">
			            	<div class="col-12">
			            		<div class="row" id="printDiv">
			            			<table style="width:100%;">
			            				<tbody>
			            					<tr align="center">
			            						<td><div id="qrcode"></div></td>
			            						<td>
			            							<span id="qr_seed_code" class="print3"></span>
						            				<span id="qr_seed_division" class="print3"></span>
					            					<span id="qr_seed_receive_date" class="print3"></span>
					            					<span id="qr_seed_receive_name" class="print3"></span>
			            						</td>
			            					</tr>
			            				</tbody>
			            			</table>
			            		</div>
			            		<div class="button-group d-flex justify-content-end">
				                   <button class="btn btn-primary btn-default btn-squared noprint" onclick="qrPrint(this);">Print QR Code label</button>
				           		</div>
			            	</div>
			            </div>
			        </div>
			    </div>
			</div>
		    <!-- ends: .modal-Basic -->
		    
		    <!-- 품종/유전정보 선택 modal -->
		    <div class="modal-basic modal fade show" id="geneticModal" tabindex="-1" role="dialog" aria-hidden="true">
			    <div class="modal-dialog modal-xl" role="document">
			        <div class="modal-content modal-bg-white">
			        	<div class="modal-header">
			        		<h6 class="modal-title">품종/유전정보 선택</h6>
		                    	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		                        	<span data-feather="x"></span>
		                        </button>
			        	</div>
			            <div class="modal-body">
			            	<div class="col-12">
				            	<div class="row">
				            		<div class="col-md-2 d-flex aling-items-center">
	                                    <label class="color-dark align-center">품종/유전정보 선택</label>
	                                </div>
				            		<div class="col-md-4">
					            		<div class="radio-horizontal-list d-flex">
					            			<div class="radio-theme-default custom-radio">
					            				<input class="radio" type="radio" name="radio" value=0 id="division_radio" checked="checked">
	                                            <label for="division_radio">
	                                                <span class="radio-text">품종</span>
	                                            </label>
					            			</div>
					            			<div class="radio-theme-default custom-radio">
					            				<input class="radio" type="radio" name="radio" value=1 id="genetic_radio">
	                                            <label for="genetic_radio">
	                                                <span class="radio-text">유전자원명</span>
	                                            </label>
					            			</div>
					            			<div class="radio-theme-default custom-radio">
					            				<input class="radio" type="radio" name="radio" value=2 id="etc_radio">
	                                            <label for="etc_radio">
	                                                <span class="radio-text">기타</span>
	                                            </label>
					            			</div>
					            		</div>
				            		</div>
				            	</div>
				            	<div class="row mt-2" id="division_row">
				            		<div class="col-md-2 mb-25 d-flex aling-items-center">
   										<label for="division_slt" class="title_asd" style="align-items: self-start">작목</label>
   									</div>
     								<div class="col-md-4 mb-25">
     									<div class="select" style="height: auto;">
		                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control division_slt" id="division_slt" placeholder="대상 작목 선택" autocomplete="off">
		                            		<ul class="select-hide">
		                            			<th:block th:each="division : ${division}">
		                            				<li class="division_slt_list" onclick="selectOpt(this);"><span th:data-value="${division.division_id}" th:text="${division.division}"></span></li>
		                            			</th:block>
		                            		</ul>
		                            	</div>
     									<!-- <select class="form-control b-light" name="division_slt" id="division_slt">
			                                <option value="0" disabled="disabled" selected="selected" hidden="hidden">작목명을 선택하세요</option>
			                                <th:block th:each="division : ${division}">
			                                	<option th:value="${division.division_id}" th:text="${division.division}"></option>
			                                </th:block>
		                            	</select> -->
     								</div>
     								<div class="col-md-6 d-flex" id="division_col">
	     								<div class="col-md-4 mb-25 d-flex aling-items-center">
	   										<label class="title_asd genetic_title">품종</label>
	   									</div>
	     								<div class="col-md-8 mb-25">
	     									<div class="select" style="height: auto;">
			                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control genetic_input" id="genetic_input" placeholder="품종 선택" autocomplete="off">
			                            		<ul class="select-hide">
			                            			
			                            		</ul>
			                            	</div>
	     									<!-- <select class="form-control b-light genetic_input">
				                                <option value="0">품종명을 선택하세요</option>
			                            	</select> -->
	     								</div>
     								</div>
     								<div class="col-md-6 d-flex" id="genetic_col">
	     								<div class="col-md-4 mb-25 d-flex aling-items-center">
	   										<label class="title_asd genetic_title">유전자원명</label>
	   									</div>
	     								<div class="col-md-8 mb-25">
	     									<div class="select" style="height: auto;">
			                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control genetic_input" id="genetic_input" placeholder="유전자원명 선택" autocomplete="off">
			                            		<ul class="select-hide">
			                            			
			                            		</ul>
			                            	</div>
	     									<!-- <select class="form-control b-light genetic_input">
				                                <option value="0">유전자원명을 선택하세요</option>
			                            	</select> -->
	     								</div>
     								</div>
     								<div class="col-md-6 d-flex" id="etc_col">
	     								<div class="col-md-4 mb-25 d-flex aling-items-center">
	   										<label class="title_asd genetic_title" style="align-items: self-start">기타</label>
	   									</div>
	     								<div class="col-md-8 mb-25" id="etc_inner_col">
	     									<div class="select" style="height: auto;">
			                            		<input type="text" onkeyup="textfilter(this);" onclick="selectFilter(this);" name="select-input" data-select="" class="form-control genetic_input" id="genetic_input" placeholder="기타 선택" autocomplete="off">
			                            		<ul class="select-hide">
			                            			
			                            		</ul>
			                            	</div>
	     									<!-- <select class="form-control b-light genetic_input">
				                                <option value="0">기타를 선택하세요</option>
			                            	</select> -->
	     								</div>
     								</div>
				            	</div>
				            	<div class="button-group d-flex justify-content-end">
				                   <button class="btn btn-primary btn-default btn-squared input_btn" onclick="useGenetic();">사용</button>
				           		</div>
			            	</div>
			            </div>
			        </div>
			    </div>
			</div>
		    <!-- ends: 품종/유전정보 선택 modal -->
     
     	</div>
     
     </main>
     
     <!-- 공통 하단 -->
    <th:block th:include="/../fragments/footer.html"></th:block>
    <!-- 공통 js -->
    <th:block th:include="/../fragments/commonjs.html"></th:block>
    <script type="text/javascript" src="/../assets/vendor_assets/js/qrcode.min.js"></script>

<script type="text/javascript" th:inline="javascript">

	var seeds = /*[[${seeds}]]*/ "null";	//시료 list
	
	var dataArr = new Array();		//수정할 데이터 Array
	var cancelArr = new Array();	//동적 태그 삭제 버튼 클릭시 삭제할 seed_id Array
	var seed_ids = new Array();		//삭제버튼 클릭시 삭제할 seed_id Array
	
	var this_1;		//품종, 유전장정보 input 태그
	
	var division_col = $("#division_col");
	var genetic_col = $("#genetic_col");
	var etc_col = $("#etc_col");
	
	var division_row = $("#division_row");
	
	var col_arr = new Array();
	col_arr[0] = division_col;
	col_arr[1] = genetic_col;
	col_arr[2] = etc_col;
	
	//종자 및 시료관리 폼 load 함수 실행
	loadSeedForm(seeds);
	
	let selectInputEls = document.querySelectorAll('input[name="select-input"]');
	let select_this;
	let select_prev;
	let select_id;
	
	function selection(){
		if(document.getSelection){
			var selection = document.getSelection();
			
			if(selection.focusNode != null){
				if(selection.focusNode.children != undefined){
					var length = selection.focusNode.children.length;
					if(length != 0){
						var check = selection.focusNode.children[0].name;
						var check2 = selection.focusOffset;
						if(check == "select-input" && check2 == "1"){
							selectFilter(selection.focusNode.children[0]);
						}
					}
				}
			}
			
		}
	}
	
	function selectFilter(e){
		
		var selection = document.getSelection();
		
		select_prev = select_this;
		select_this = e;
		select_id = e.id;
		
		let selectOptionWrapEls = document.querySelectorAll('.select ul');
		
		var currTarget = e;
		var delOption = currTarget.nextElementSibling;
		
		for(var i = 0 ; i < selectOptionWrapEls.length; i++){
			
			if(selectOptionWrapEls[i].classList.contains("select-show")){
				selectOptionWrapEls[i].classList.add('select-hide');
				selectOptionWrapEls[i].classList.remove('select-show');
			}
		}
		
		if(delOption.classList.contains('select-hide')){
			delOption.classList.remove('select-hide');
			delOption.classList.add('select-show');
		}
		
	}
	
	let body = document.querySelector('body');
	function hideSelect(e){
		
		let selectOptionWrapEls = document.querySelectorAll('.select ul');
		var target = e.target.name;
		
		if(target == "select-input"){
			if(select_prev != undefined && select_this != select_prev){
				var prev_attr = select_prev.getAttribute("value");
				var prev_text = select_prev.value;
				if(prev_attr != prev_text){
					select_prev.value = prev_attr;
					var prev_textEl = select_prev.parentNode.children[1].children;
					
					for(var i = 0; i < prev_textEl.length; i++){
						prev_textEl[i].style.display = "flex";
					}
					
					var textEl = select_this.parentNode.children[1].children;
					
					for(var i = 0; i < textEl.length; i++){
						textEl[i].style.display = "flex";
					}
				}
			}
		}
		
		if(target != "select-input"){
			if(select_this != undefined && select_this.value != null){
				var select_attr = select_this.getAttribute("value");
				var select_text = select_this.value;
				
				if(select_attr != select_text && select_this.id == select_id){
					select_this.value = select_attr;
					
					var textEl = select_this.parentNode.children[1].children;
					
					for(var i = 0; i < textEl.length; i++){
						textEl[i].style.display = "flex";
					}
				}
			}
			
			for(var i = 0 ; i < selectOptionWrapEls.length; i++){
				
				if(selectOptionWrapEls[i].classList.contains("select-show")){
					selectOptionWrapEls[i].classList.add('select-hide');
					selectOptionWrapEls[i].classList.remove('select-show');
				}
			}
		}
	}
	body.addEventListener('click',hideSelect);
	body.addEventListener('click', selection);
	
	/* 옵션선택 */
	function selectOpt(e){
	    var dataSelect = $(e).children().attr("data-value");
	    var text = $(e).children().text();
	    $(e).parent().prev().attr("data-select", dataSelect);
	    $(e).parent().prev().attr("value", text);
	    $(e).parent().attr("class", "select-hide");
	    
	    //저장장소에 따른 저장 조건 데이터 노출
	    var condition = $(e).children().attr("data-condition");
	    if(condition != 'undefined'){
	    	$(e).parent().parent().parent().next().next().children().val(condition);
	    }
	    
	    var division_slt = e.parentNode.previousElementSibling;
	    var division_slt_id = division_slt.id;
	    //품종/유전정보 선택 모달 작목 ajax 이벤트
	    if(division_slt_id == "division_slt"){
	    	
	    	var division_id = dataSelect;
	    	var genetic_type = $("input:radio[name=radio]:checked").val();
	    	
	    	var data = {"division_id" : division_id, "genetic_type" : genetic_type};
	    	
	    	$.ajax({
				url : "/data/seed/selectGenetic",
				method : "POST",
				dataType : "json",
				data : data,
				success : function(genetic){
					
					var genetic_input = $(".genetic_input").next();
					var add_list = "";
					
					$(".genetic_input").attr("data-select", "");
					$(".genetic_input").attr("value", "");
					$(".genetic_input").val("");
					
					for(var i = 0; i < genetic.length; i++){
						add_list += '<li class="genetic_input_list" onclick="selectOpt(this);">';
						add_list += '<span data-value="'+genetic[i].genetic_id+'">'+genetic[i].genetic+'</span>';
						add_list += '</li>';
					}//end for
					
					if($("input:radio[name=radio]:checked").val() == 2){
						add_list += '<li class="genetic_input_list" onclick="selectOpt(this);">';
						add_list += '<span data-value="etc">신규입력</span>';
						add_list += '</li>';
					}
					
					genetic_input.empty();
					genetic_input.append(add_list);
					
				}//end success
			});//end ajax */
	    	
	    }
	    
	    //품종 유전정보 기타 신규입력 선택시
	    if(dataSelect == "etc"){
			var etc_inner_col = $("#etc_inner_col");
			
			var str = '<input type="text" class="form-control" id="etc_input" style="margin-top: 10px;">';
			etc_inner_col.append(str);
	    }
	    
	    
	}//end 옵션 선택
	
	//필터 함수
	function textfilter(e){
		
		var search = $(e).val().toLowerCase();
		var className = $(e).next().children().eq(0).attr('class');
		
		var textEl = $(e).next().children();
		
		for(var i = 0; i < textEl.length; i++){
			var text = textEl[i].children[0].innerText;
			if(text.toLowerCase().includes(search)){
				textEl[i].style.display = "flex";
			}else{
				textEl[i].style.display = "none";
			}
		}
		
	}//end 필터 함수
	
	
	//품종, 유전정보 모달에서 선택박스 선택 이벤트
	$("input:radio[name=radio]").on("change", function(){
		if($("#division_radio").is(':checked')){
			genetic_col.remove();
			etc_col.remove();
			var str = col_arr[0];
			division_row.append(str);
		}else if($("#genetic_radio").is(':checked')){
			division_col.remove();
			etc_col.remove();
			var str = col_arr[1];
			division_row.append(str);
		}else if($("#etc_radio").is(':checked')){
			genetic_col.remove();
			division_col.remove();
			var str = col_arr[2];
			division_row.append(str);
		}
		$("#division_slt").attr("data-select", "");
		$("#division_slt").val("");
		$(".genetic_input").attr("data-select", "");
		$(".genetic_input").val("");
	});//end 품종, 유전정보 선택 이벤트
	
	//genetic etc 등록
	function insertGeneticEtc(){
		return new Promise(function(resolve){
			
			var genetic = $("#etc_input").val();
			var division_id = $("#division_slt").attr("data-select");
			
			var data = {
					"genetic" : genetic,
					"division_id" : division_id
			};
			
			$.ajax({
				url : "/data/seed/insertGeneticEtc",
				method : "POST",
				dataType : 'json',
				data : data,
				success : function(result){
					if(result == 0){
						
					}else{
						resolve(result);
					}
				}
			});//end ajax
			
		});//end return
	}//end insertReport
	
	//품종, 유전정보 사용 버튼 이벤트
	function useGenetic(){
		var str1 = $("#division_slt").val();
		var str2 = $(".genetic_input").val();
		var selectData = $(".genetic_input").attr("data-select");
		
		if(selectData == ""){
			alert("품종/유전정보를 선택해주세요");
		}else if(selectData == "etc" && $("#etc_input").val() == ""){
			alert("기타를 입력해 주세요");
		}else{
			
			if(selectData == "etc"){
				
				
				insertGeneticEtc().then(function(result){
					
					if(result == 0){
						
					}else{
						str2 = $("#etc_input").val();
						var str = str1 + " > " + str2;
						
						this_1.val(str);
						var genetic_id = result;
						this_1.attr('data-genetic-id', result);
						
						$("#geneticModal").modal("hide");
					}
					
				});
				
			}else{
				var str = str1 + " > " + str2;
				
				this_1.val(str);
				var genetic_id = selectData;
				this_1.attr('data-genetic-id', genetic_id);
				
				$("#geneticModal").modal("hide");
			}//end else
				
		}//end else
		
	}
	
	//품종, 유전자정보 모달 show
	$(document).on("click", ".genetic_show", function(){
		$("#division_radio").prop("checked", true);
		
		$("#division_slt").attr("data-select", "");
		$("#division_slt").val("");
		$(".genetic_input").attr("data-select", "");
		$(".genetic_input").val("");
		
		$("#geneticModal").modal("show");
		$("#etc_input").remove();
		var str = col_arr[0];
		division_row.append(str);
		genetic_col.remove();
		etc_col.remove();
		
		this_1 = $(this).prev();
		
	});
	
	// seed 길이만큼 종자 및 시료관리 폼 load
	function loadSeedForm(seeds)
	{
		$("#seed_form").children(".form-standard").hide();									// 복사할 첫번째 폼은 숨기기
		
		var seed_form = $("#seed_form");
		var seed_form_inner = $("#seed_form").children(".form-standard").html();
		
		var str = "";																		// seed_form에 append 해줄 내용
		str += '<div class="card card-bordered copy-form-standard">';						// 실제 사용할 폼에 copy-form-standard 클래스 추가
		str += seed_form_inner;
		str += '</div>';
		
		// 과제 비연계시 체크박스 이벤트
		if(seeds[0].report_user_name === "0")
		{
			$("#not_report").prop("checked", true);
			$("#not_report").prop("disabled", true);
		}else{
			$("#not_report").prop("disabled", true);
		}
		
		// seeds 사이즈 만큼 seed_form 동적 생성
		var length = seeds.length;
		
		for(var i = 0; i < length; i++)
		{
			if(i === 0)
			{
				seed_form.append(str);
			}
			else
			{
				seed_form.append(str);
				
				var delbtn = "";																//삭제 버튼내용
				delbtn += '<button type="button" class="btn mt-25 mr-25 seed_form_del" th:data-seed-id="0" style="background-color: red; color: white; width: 70px;">-</button>';
				
				del_btn_form = $("#seed_form").children(":last").find(".del_btn_div");
				del_btn_form.append(delbtn);
			}
		}
		
		var hidden_seed_id = "";
		hidden_seed_id += '<input type="hidden" id="hidden_seed_id" value='+seeds[0].seed_id+'>';
		
		//동적 생성한 태그에 기존 값 노출
		$(document).find(".copy-form-standard").each(function(index, item)
		{
			if(index === 0)
			{
				$(this).find(".card-body").append(hidden_seed_id);
			}
			
			$(this).find(".seed_code").val(seeds[index].seed_code);
			$(this).find(".seed_manager").attr("data-select", seeds[index].seed_manager);
			$(this).find(".seed_manager").attr("value", seeds[index].manager_name);
			$(this).find(".seed_area").val(seeds[index].seed_area);
			$(this).find(".seed_year").val(seeds[index].seed_year);
			$(this).find(".seed_method").attr("data-select", seeds[index].seed_method);
			$(this).find(".seed_method").attr("value", seeds[index].seed_method);
			$(this).find(".seed_amount").val(seeds[index].seed_amount);
			$(this).find(".eaches_id").attr("value", seeds[index].eaches_name);
			$(this).find(".eaches_id").attr("data-select", seeds[index].eaches_id);
			$(this).find(".seed_comment").val(seeds[index].seed_comment);
			$(this).find(".genetic_id").attr("data-genetic-id", seeds[index].genetic_id);
			$(this).find(".genetic_id").val(seeds[index].division + " > " + seeds[index].genetic);
			$(this).find(".ware_id").attr("data-select", seeds[index].ware_id);
			$(this).find(".ware_id").attr("value", seeds[index].warehouse);
			$(this).find(".ware_condition").val(seeds[index].ware_condition);
			$(this).find(".seed_sender").val(seeds[index].seed_sender);
			$(this).find(".send_date").val(seeds[index].send_date);
			$(this).find(".seed_receiver").attr("data-select", seeds[index].seed_receiver);
			$(this).find(".seed_receiver").attr("value", seeds[index].receive_name);
			$(this).find(".receive_date").val(seeds[index].receive_date);
			$(this).find(".send_date").val(seeds[index].send_date);
			$(this).find(".qr-btn").attr("data-id", seeds[index].seed_id);
			
			if(seeds[index].seed_share != 0)
			{
				$(this).find(".seed_share").val(seeds[index].seed_share).prop("checked", true);
			}
			
			if($(this).find(".seed_form_del").attr("th:data-seed-id") != undefined)
			{
				$(this).find(".seed_form_del").attr("th:data-seed-id", seeds[index].seed_id);
			}
		});
		
		//동적 생성된 datepicker 클래스에 datepicker 이벤트 주기
		$(".send_date").each(function(index)
		{
			if(index == 0)
			{
				return true;
			}
			else
			{
				$(this).addClass("send-datepicker"+index);
				
				$(".ui-datepicker-trigger").remove();
				$(".send-datepicker"+index).removeClass("hasDatepicker").removeAttr("id").datepicker();
			}
		});
		
		$(".receive_date").each(function(index)
		{
			if(index == 0)
			{
				return true;
			}
			else
			{
				$(this).addClass("receive-datepicker"+index);
				
				$(".ui-datepicker-trigger").remove();
				$(".receive-datepicker"+index).removeClass("hasDatepicker").removeAttr("id").datepicker();
			}
		});
	};
	
	//등록 폼 추가 이벤트
	$("#addseedFormBtn").on("click", function(){
		var seed_form = $("#seed_form");
		var seed_form_inner = $("#seed_form").children(".form-standard").html();
		
		var str = "";
		str += '<div class="card card-bordered copy-form-standard">';
		str += seed_form_inner;
		str += '</div>';
		
		seed_form.append(str);
		
		//삭제 버튼 추가
		var delbtn = "";
		delbtn += '<button type="button" class="btn mt-25 mr-25 seed_form_del" th:data-seed-id="0" style="background-color: red; color: white; width: 70px;">-</button>';
		
		del_btn_form = $("#seed_form").children(":last").find(".del_btn_div");
		del_btn_form.append(delbtn);
		
		//폼 추가 후 수확후 이용과 공유 값 초기화
		$("#seed_form").children(":last").find(".seed_share").val(0);
		
		//폼 추가 후 품종, 유전자원정보 th:data-genetic-id 삭제
		$("#seed_form").children(":last").find(".genetic_id").removeAttr("th:data-genetic-id");
		
		//동적 생성된 datepicker 클래스에 datepicker 이벤트 주기
		$(".send_date").each(function(index){
			if(index == 0){
				return true;
			}else{
				$(this).addClass("send-datepicker"+index);
				$(".ui-datepicker-trigger").remove();
				$(".send-datepicker"+index).removeClass("hasDatepicker").removeAttr("id").datepicker();
			}
		});
		
		$(".receive_date").each(function(index){
			if(index == 0){
				return true;
			}else{
				$(this).addClass("receive-datepicker"+index);
				$(".ui-datepicker-trigger").remove();
				$(".receive-datepicker"+index).removeClass("hasDatepicker").removeAttr("id").datepicker();
			}
		});
		
	});//end 등록 폼 추가 이벤트
	
	//동적으로 추가된 form 삭제 버튼 이벤트
	$(document).on("click", ".seed_form_del", function(){
		var delNum = $(this).attr("th:data-seed-id");
		if(delNum != "0"){
			cancelArr.push(delNum);
		}
		
		$(this).parent().parent().parent().parent().remove();
	});
	
	//수확후 이용과 공유 체크박스 이벤트
	$(document).on("change", ".seed_share", function(){
		if($(this).is(':checked')){
			$(this).val(1);
		}else{
			$(this).val(0);
		}
	});
	
	//시료 수정
	function updateConfirm(){
		
		/* console.log(dataArr);
		console.log(cancelArr); */
		
		$.ajax({
			url : "/data/seed/updateSeed?cancelArr="+cancelArr,
			method : "POST",
			contentType : "application/json; charset=utf-8",
			data : JSON.stringify(dataArr),
			success : function(result){
				
				if(result == 0){
					
				}else {
					$("#update_popup").css("display", "none");
					$("#success_text").text("수정이 완료되었습니다.");
					$("#success_popup").css("display", "flex");
				}
			}
		});//end ajax
		
	}//end 시료 등록

	//시료 삭제
	function deleteConfirm(){
		
		for(var i = 0; i < seeds.length; i++){
			seed_ids.push(seeds[i].seed_id);
		}
		
		$.ajax({
			url : "/data/seed/deleteSeed",
			method : "POST",
			contentType : "application/json; charset=utf-8",
			data : JSON.stringify(seed_ids),
			success : function(result){
				
				if(result == 0){
					
				}else {
					$("#delete_popup").css("display", "none");
					$("#success_text").text("삭제가 완료되었습니다.");
					$("#success_popup").css("display", "flex");
				}
			}
		});//end ajax
		
	}//end 시료 삭제
	
	//발송일자 datepicker
	$.datepicker.setDefaults({
		dateFormat: "yy-mm-dd",
      	duration: "medium",
      	changeMonth: true,
      	changeYear: true,
      	yearRange: "2010:2030",
	});
	
	//날짜 캘린더 동적 생성 다음주 와서 다시하기
	$(".send-datepicker0").datepicker();
	
	$(".receive-datepicker0").datepicker();
	
	//수정 버튼 안내 팝업
	function UpdateBtn()
	{
		var isValidate = false;
		
		dataArr = [];
		
		//폼별로 값 가져오기 위한 each문
		$(".copy-form-standard").each(function(index, item)
		{
			if($(this).find(".genetic_id").attr("data-genetic-id") == undefined)
			{
				alert("품종/유전자 정보를 선택해주세요.");
				
				$(this).find(".genetic_id").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($(this).find(".seed_manager").attr("data-select") == "")
			{
				alert("담당자를 선택해주세요.");
				
				$(this).find(".seed_manager").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($.trim($(this).find(".seed_area").val()) == "")
			{
				alert("생산지역을 입력해주세요.");
				
				$(this).find(".seed_area").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($.trim($(this).find(".seed_year").val()) == "")
			{
				alert("생산연도를 입력해주세요.");
				
				$(this).find(".seed_year").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($.trim($(this).find(".seed_amount").val()) == "")
			{
				alert("수량을 입력해주세요.");
				
				$(this).find(".seed_amount").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($(this).find(".eaches_id").attr("data-select") == "")
			{
				alert("단위를 선택해주세요.");
				
				$(this).find(".eaches_id").focus();
				
				isValidate = false;
				
				return false;
			}
			else if($(this).find(".ware_id").attr("data-select") == "")
			{
				alert("저장장소를 선택해주세요.");
				
				$(this).find(".ware_id").focus();
				
				isValidate = false;
				
				return false;
			}
			else
			{
				var seed_id = "";
				
				if(index == 0)
				{
					seed_id = $(this).find("#hidden_seed_id").val();
				}
				else
				{
					seed_id = $(this).find(".seed_form_del").attr("th:data-seed-id");
				}
				
				var data = {
						"seed_manager" : $(this).find(".seed_manager").attr("data-select"),
						"seed_area" : $.trim($(this).find(".seed_area").val()),
						"seed_year" : $.trim($(this).find(".seed_year").val()),
						"seed_method" : $.trim($(this).find(".seed_method").val()),
						"seed_amount" : $.trim($(this).find(".seed_amount").val()),
						"eaches_id" : $(this).find(".eaches_id").attr("data-select"),
						"seed_comment" : $.trim($(this).find(".seed_comment").val()),
						"genetic_id" : $(this).find(".genetic_id").attr("data-genetic-id"),
						"seed_report" : $.trim($("#seed_report").val()),
						"ware_id" : $(this).find(".ware_id").attr("data-select"),
						"seed_sender" : $.trim($(this).find(".seed_sender").val()),
						"send_date" : $.trim($(this).find(".send_date").val()),
						"seed_receiver" : $(this).find(".seed_receiver").attr("data-select"),
						"receive_date" : $.trim($(this).find(".receive_date").val()),
						"seed_share" : $(this).find(".seed_share").val(),
						"seed_id" : seed_id,
						"seed_code" : $(this).find(".seed_code").val(),
						"report_code" : seeds[0].report_code
						};
				
				dataArr.push(data);
				isValidate = true;
			}
		});
		
		if(isValidate)
		{
			$("#update_popup").css("display", "flex");
		}
	}
	
	// 삭제 버튼 안내 팝업
	function DeleteBtn()
	{
		$("#delete_popup").css("display", "flex");
	}
	
	// 팝업 취소
	function CancelBtn()
	{
		$("#update_popup").css("display", "none");
		$("#delete_popup").css("display", "none");
	}
	
	//승인 버튼 안내 팝업
	function UpdateStatusBtn(){
		$("#updateStatus_popup").css("display", "flex");
	}
	
	//승인 함수
	function UpdateStatus(){
		
		$.ajax({
			url : "/data/seed/updateStatus",
			method : "POST",
			contentType : "application/json; charset=utf-8",
			data : JSON.stringify(seeds),
			success : function(result){
				
				if(result == 0){
					
				}else {
					$("#updateStatus_popup").css("display", "none");
					$("#success_text").text("승인 완료되었습니다.");
					$("#success_popup").css("display", "flex");
				}
			}
		});//end ajax
		
	}//end 승인 함수
	
	
	//qr 이벤트
	$(document).on("click", ".qr-btn", function(){
		
		$("#qrcode").empty();
		
		var seed_id = $(this).attr("data-id");
		var seed_data = new Object();
		
		for(var i = 0; i < seeds.length; i++){
			if(seeds[i].seed_id == seed_id){
				seed_data = seeds[i];
			}
		}
		
		var seed_code = seed_data.seed_code;
		var seed_division = seed_data.division + " > " + seed_data.genetic;
		var seed_receive_date = seed_data.receive_date;
		var seed_receive_name = seed_data.receive_name;
		
		$("#qr_seed_code").text(seed_code);
		$("#qr_seed_division").text(seed_division);
		$("#qr_seed_receive_date").text(seed_receive_date);
		$("#qr_seed_receive_name").text(seed_receive_name);
		
		var protocol = window.location.protocol;
		var port = ":"+window.location.port;
		var hostname = "//"+window.location.hostname;
		var url = protocol+hostname+port+"/data/seed/sampleSeed?seed_id="+seed_id;
		
		console.log(seed_data);
		
		var qrcode = new QRCode(document.getElementById("qrcode"),{
			width : 180,
			height : 180,
			colorDark : "#000000",
	        colorLight : "#ffffff",
	        correctLevel : QRCode.CorrectLevel.H
		});
		
		qrcode.makeCode(url);
		
		$("#qrModal").modal("show");
		
	});
	
	//인쇄 이벤트
	function qrPrint(e){
		
		var text1 = $(e).parent().prev().children().children().children().children().eq(1).children().eq(0).text();
		var text2 = $(e).parent().prev().children().children().children().children().eq(1).children().eq(1).text();
		var text3 = $(e).parent().prev().children().children().children().children().eq(1).children().eq(2).text();
		var text4 = $(e).parent().prev().children().children().children().children().eq(1).children().eq(3).text();
		
		var div1 = $(e).parent().prev().children().children().children().children().eq(0).html();
		
		var initBody = "";
		
		for(var i = 0; i < 10; i++){
			initBody += '<div style="display:flex; float:left; margin: 20px 20px 20px 20px;">';
			initBody += '<div style="float: left;">';
			initBody += div1;
			initBody += '</div>';
			initBody += '<div style="float:left; width: 150px;">';
			initBody += '<span style="display: block; text-align:left; padding-left:30px; font-size:14px; color: #111; line-height:30px;">'+text1+'</span>';
			initBody += '<span style="display: block; text-align:left; padding-left:30px; font-size:14px; color: #111; line-height:30px;">'+text2+'</span>';
			initBody += '<span style="display: block; text-align:left; padding-left:30px; font-size:14px; color: #111; line-height:30px;">'+text3+'</span>';
			initBody += '<span style="display: block; text-align:left; padding-left:30px; font-size:14px; color: #111; line-height:30px;">'+text4+'</span>';
			initBody += '</div>';
			initBody += '</div>';
		}
		
		//인쇄 전 실행 함수
		window.onbeforeprint = function(){
			document.body.innerHTML = initBody;
		};
		
		//인쇄 후 실행 함수
		window.onafterprint = function(){
			this.window.location.reload();// 인쇄 후 화면 리로드
		};
		
		window.print();//인쇄 실행
		
	}
	
</script>
</body>
</html>